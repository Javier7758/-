<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 跨年旅行 | 本地儲存版</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }
        .tab-active { color: #ff0000; border-bottom: 2px solid #ff0000; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="app" class="max-w-md mx-auto min-h-screen pb-20 relative shadow-2xl bg-white">
        
        <header class="bg-slate-900 text-white p-6 rounded-b-3xl shadow-lg">
            <h1 class="text-2xl font-bold italic">跨年旅行 <span class="text-orange-500">2026</span></h1>
            <p class="text-sm opacity-75">資料已儲存於您的裝置，無需登入</p>
        </header>

        <nav class="flex justify-around bg-white border-b sticky top-0 z-10 text-slate-400 font-medium">
            <button @click="currentTab = 'itinerary'" :class="{'tab-active': currentTab === 'itinerary'}" class="py-4 flex-1 text-sm"><i class="fa-solid fa-calendar-days block text-lg mb-1"></i>行程</button>
            <button @click="currentTab = 'landmarks'" :class="{'tab-active': currentTab === 'landmarks'}" class="py-4 flex-1 text-sm"><i class="fa-solid fa-camera block text-lg mb-1"></i>景點</button>
            <button @click="currentTab = 'finance'" :class="{'tab-active': currentTab === 'finance'}" class="py-4 flex-1 text-sm"><i class="fa-solid fa-wallet block text-lg mb-1"></i>記帳</button>
            <button @click="currentTab = 'wishlist'" :class="{'tab-active': currentTab === 'wishlist'}" class="py-4 flex-1 text-sm"><i class="fa-solid fa-gift block text-lg mb-1"></i>願望</button>
            
            <a href="https://www.gbaweather.net/tc/" target="_blank" class="py-4 flex-1 text-sm flex flex-col items-center justify-center text-slate-400 hover:text-orange-500 transition duration-150">
                <i class="fa-solid fa-cloud-sun block text-lg mb-1"></i>
                天氣
            </a>
        </nav>

        <main class="p-4">
            
            <section v-if="currentTab === 'itinerary'" class="space-y-4">
                
                <div class="bg-white p-4 rounded-2xl shadow-lg border border-orange-200">
                    <h3 class="font-bold text-orange-600 mb-3">新增行程</h3>
                    <input v-model="newScheduleItem.date" placeholder="日期 (e.g., 12/26)" class="w-full p-2 border rounded-lg text-sm mb-2 focus:ring-orange-500 focus:border-orange-500">
                    <input v-model="newScheduleItem.tag" placeholder="標籤 (e.g., 購物, 午餐) (選填)" class="w-full p-2 border rounded-lg text-sm mb-2 focus:ring-orange-500 focus:border-orange-500">
                    <textarea v-model="newScheduleItem.desc" placeholder="行程描述..." rows="2" class="w-full p-2 border rounded-lg text-sm mb-3 focus:ring-orange-500 focus:border-orange-500"></textarea>
                    <button @click="addScheduleItem" :disabled="!newScheduleItem.date || !newScheduleItem.desc" class="w-full bg-slate-900 disabled:opacity-50 text-white p-2 rounded-xl font-bold active:scale-95 transition">
                        新增日程 <i class="fa-solid fa-calendar-plus ml-1"></i>
                    </button>
                </div>

                <div v-for="day in schedule" :key="day.id" class="border-l-4 border-orange-500 pl-4 py-2 relative bg-white rounded-r-xl p-3 shadow-md hover:shadow-lg transition">
                    
                    <div v-if="!day.isEditing">
                        <div class="flex justify-between items-center mb-2">
                            <span class="font-bold text-slate-900">{{ day.date }}</span>
                            <span class="text-xs bg-orange-100 text-orange-600 px-2 py-1 rounded-full">{{ day.tag }}</span>
                        </div>
                        <p class="text-sm text-slate-600 mb-3">{{ day.desc }}</p>
                        <div class="flex justify-end gap-3 pt-1 border-t border-slate-100 mt-2">
                            <button @click="toggleEdit(day)" class="text-xs text-blue-500 hover:text-blue-700 font-medium"><i class="fa-solid fa-edit mr-1"></i>編輯</button>
                            <button @click="deleteScheduleItem(day.id)" class="text-xs text-red-500 hover:text-red-700 font-medium"><i class="fa-solid fa-trash-alt mr-1"></i>刪除</button>
                        </div>
                    </div>

                    <div v-else>
                         <h4 class="font-bold text-sm mb-2 text-orange-600">編輯行程</h4>
                         <input v-model="day.date" placeholder="日期 (e.g., 12/26)" class="w-full p-2 border rounded-lg text-sm mb-2 focus:ring-orange-500 focus:border-orange-500">
                         <input v-model="day.tag" placeholder="標籤" class="w-full p-2 border rounded-lg text-sm mb-2 focus:ring-orange-500 focus:border-orange-500">
                         <textarea v-model="day.desc" placeholder="行程描述..." rows="2" class="w-full p-2 border rounded-lg text-sm mb-3 focus:ring-orange-500 focus:border-orange-500"></textarea>
                         <button @click="toggleEdit(day)" class="w-full bg-green-600 text-white p-2 rounded-xl font-bold active:scale-95 transition">
                             儲存修改 <i class="fa-solid fa-save ml-1"></i>
                         </button>
                    </div>
                </div>
            </section>

            <section v-if="currentTab === 'landmarks'" class="space-y-4">
                
                <div class="bg-white p-4 rounded-2xl shadow-lg border border-orange-200">
                    <h3 class="font-bold text-orange-600 mb-3">新增景點</h3>
                    <input v-model="newLandmarkItem.name" placeholder="景點名稱 (e.g., 太平山頂)" class="w-full p-2 border rounded-lg text-sm mb-2 focus:ring-orange-500 focus:border-orange-500">
                    <input v-model="newLandmarkItem.type" placeholder="景點類型 (e.g., 自然景觀)" class="w-full p-2 border rounded-lg text-sm mb-2 focus:ring-orange-500 focus:border-orange-500">
                    <textarea v-model="newLandmarkItem.desc" placeholder="景點介紹/筆記..." rows="2" class="w-full p-2 border rounded-lg text-sm mb-3 focus:ring-orange-500 focus:border-orange-500"></textarea>
                    <button @click="addLandmarkItem" :disabled="!newLandmarkItem.name" class="w-full bg-slate-900 disabled:opacity-50 text-white p-2 rounded-xl font-bold active:scale-95 transition">
                        新增景點 <i class="fa-solid fa-plus ml-1"></i>
                    </button>
                </div>

                <div v-for="item in landmarks" :key="item.id" class="p-4 border rounded-2xl flex flex-col bg-white shadow-sm hover:shadow-md transition">
                    
                    <div v-if="!item.isEditing">
                        <div class="flex justify-between items-start mb-2">
                            <div>
                                <h3 class="font-bold text-slate-900">{{ item.name }}</h3>
                                <p class="text-xs text-orange-600">{{ item.type }}</p>
                            </div>
                            <a :href="'http://googleusercontent.com/maps.google.com/search?q=' + item.name + '+香港'" target="_blank" class="text-xs bg-slate-100 text-slate-600 px-2 py-1 rounded-full hover:bg-slate-200">導航 <i class="fa-solid fa-location-arrow ml-1"></i></a>
                        </div>
                        <p class="text-sm text-slate-600 mb-3">{{ item.desc }}</p>
                        <div class="flex justify-end gap-3 pt-1 border-t border-slate-100 mt-2">
                            <button @click="toggleLandmarkEdit(item)" class="text-xs text-blue-500 hover:text-blue-700 font-medium"><i class="fa-solid fa-edit mr-1"></i>編輯</button>
                            <button @click="deleteLandmarkItem(item.id)" class="text-xs text-red-500 hover:text-red-700 font-medium"><i class="fa-solid fa-trash-alt mr-1"></i>刪除</button>
                        </div>
                    </div>

                    <div v-else>
                         <h4 class="font-bold text-sm mb-2 text-orange-600">編輯景點</h4>
                         <input v-model="item.name" placeholder="景點名稱" class="w-full p-2 border rounded-lg text-sm mb-2 focus:ring-orange-500 focus:border-orange-500">
                         <input v-model="item.type" placeholder="景點類型" class="w-full p-2 border rounded-lg text-sm mb-2 focus:ring