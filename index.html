<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 è·¨å¹´æ—…è¡Œ | æ—…ç¨‹ç®¡ç† (æ™¯é»ç®¡ç†)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }
        /* å°èˆªåˆ—è¢«é¸ä¸­æ™‚çš„æ¨£å¼ */
        .tab-active { color: #ff0000; border-bottom: 2px solid #ff0000; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="app" class="max-w-md mx-auto min-h-screen pb-20 relative shadow-2xl bg-white">
        
        <header class="bg-slate-900 text-white p-6 rounded-b-3xl shadow-lg">
            <h1 class="text-2xl font-bold italic">è·¨å¹´æ—…è¡Œ <span class="text-orange-500">2026</span></h1>
            <p class="text-sm opacity-75">12/25 - 01/04 | â” é¦™æ¸¯</p>
        </header>

        <nav class="flex justify-around bg-white border-b sticky top-0 z-10 text-slate-400 font-medium">
            <button @click="currentTab = 'itinerary'" :class="{'tab-active': currentTab === 'itinerary'}" class="py-4 flex-1 text-sm"><i class="fa-solid fa-calendar-days block text-lg mb-1"></i>è¡Œç¨‹</button>
            <button @click="currentTab = 'landmarks'" :class="{'tab-active': currentTab === 'landmarks'}" class="py-4 flex-1 text-sm"><i class="fa-solid fa-camera block text-lg mb-1"></i>æ™¯é»</button>
            <button @click="currentTab = 'finance'" :class="{'tab-active': currentTab === 'finance'}" class="py-4 flex-1 text-sm"><i class="fa-solid fa-wallet block text-lg mb-1"></i>è¨˜å¸³</button>
            <button @click="currentTab = 'wishlist'" :class="{'tab-active': currentTab === 'wishlist'}" class="py-4 flex-1 text-sm"><i class="fa-solid fa-gift block text-lg mb-1"></i>é¡˜æœ›</button>
            
            <a href="https://www.gbaweather.net/tc/" target="_blank" class="py-4 flex-1 text-sm flex flex-col items-center justify-center text-slate-400 hover:text-orange-500 transition duration-150">
                <i class="fa-solid fa-cloud-sun block text-lg mb-1"></i>
                å¤©æ°£
            </a>
        </nav>

        <main class="p-4">
            
            <section v-if="currentTab === 'itinerary'" class="space-y-4">
                
                <div class="bg-white p-4 rounded-2xl shadow-lg border border-orange-200">
                    <h3 class="font-bold text-orange-600 mb-3">æ–°å¢è¡Œç¨‹</h3>
                    <input v-model="newScheduleItem.date" placeholder="æ—¥æœŸ (e.g., 12/26)" class="w-full p-2 border rounded-lg text-sm mb-2 focus:ring-orange-500 focus:border-orange-500">
                    <input v-model="newScheduleItem.tag" placeholder="æ¨™ç±¤ (e.g., è³¼ç‰©, åˆé¤) (é¸å¡«)" class="w-full p-2 border rounded-lg text-sm mb-2 focus:ring-orange-500 focus:border-orange-500">
                    <textarea v-model="newScheduleItem.desc" placeholder="è¡Œç¨‹æè¿°..." rows="2" class="w-full p-2 border rounded-lg text-sm mb-3 focus:ring-orange-500 focus:border-orange-500"></textarea>
                    <button @click="addScheduleItem" :disabled="!newScheduleItem.date || !newScheduleItem.desc" class="w-full bg-slate-900 disabled:opacity-50 text-white p-2 rounded-xl font-bold active:scale-95 transition">
                        æ–°å¢æ—¥ç¨‹ <i class="fa-solid fa-calendar-plus ml-1"></i>
                    </button>
                </div>

                <div v-for="day in schedule" :key="day.id" class="border-l-4 border-orange-500 pl-4 py-2 relative bg-white rounded-r-xl p-3 shadow-md hover:shadow-lg transition">
                    
                    <div v-if="!day.isEditing">
                        <div class="flex justify-between items-center mb-2">
                            <span class="font-bold text-slate-900">{{ day.date }}</span>
                            <span class="text-xs bg-orange-100 text-orange-600 px-2 py-1 rounded-full">{{ day.tag }}</span>
                        </div>
                        <p class="text-sm text-slate-600 mb-3">{{ day.desc }}</p>
                        <div class="flex justify-end gap-3 pt-1 border-t border-slate-100 mt-2">
                            <button @click="toggleEdit(day)" class="text-xs text-blue-500 hover:text-blue-700 font-medium"><i class="fa-solid fa-edit mr-1"></i>ç·¨è¼¯</button>
                            <button @click="deleteScheduleItem(day.id)" class="text-xs text-red-500 hover:text-red-700 font-medium"><i class="fa-solid fa-trash-alt mr-1"></i>åˆªé™¤</button>
                        </div>
                    </div>

                    <div v-else>
                         <h4 class="font-bold text-sm mb-2 text-orange-600">ç·¨è¼¯è¡Œç¨‹</h4>
                         <input v-model="day.date" placeholder="æ—¥æœŸ (e.g., 12/26)" class="w-full p-2 border rounded-lg text-sm mb-2 focus:ring-orange-500 focus:border-orange-500">
                         <input v-model="day.tag" placeholder="æ¨™ç±¤" class="w-full p-2 border rounded-lg text-sm mb-2 focus:ring-orange-500 focus:border-orange-500">
                         <textarea v-model="day.desc" placeholder="è¡Œç¨‹æè¿°..." rows="2" class="w-full p-2 border rounded-lg text-sm mb-3 focus:ring-orange-500 focus:border-orange-500"></textarea>
                         <button @click="toggleEdit(day)" class="w-full bg-green-600 text-white p-2 rounded-xl font-bold active:scale-95 transition">
                             å„²å­˜ä¿®æ”¹ <i class="fa-solid fa-save ml-1"></i>
                         </button>
                    </div>
                </div>
            </section>

            <section v-if="currentTab === 'landmarks'" class="space-y-4">
                
                <div class="bg-white p-4 rounded-2xl shadow-lg border border-orange-200">
                    <h3 class="font-bold text-orange-600 mb-3">æ–°å¢æ™¯é»</h3>
                    <input v-model="newLandmarkItem.name" placeholder="æ™¯é»åç¨± (e.g., å¤ªå¹³å±±é ‚)" class="w-full p-2 border rounded-lg text-sm mb-2 focus:ring-orange-500 focus:border-orange-500">
                    <input v-model="newLandmarkItem.type" placeholder="æ™¯é»é¡å‹ (e.g., è‡ªç„¶æ™¯è§€)" class="w-full p-2 border rounded-lg text-sm mb-2 focus:ring-orange-500 focus:border-orange-500">
                    <textarea v-model="newLandmarkItem.desc" placeholder="æ™¯é»ä»‹ç´¹/ç­†è¨˜..." rows="2" class="w-full p-2 border rounded-lg text-sm mb-3 focus:ring-orange-500 focus:border-orange-500"></textarea>
                    <button @click="addLandmarkItem" :disabled="!newLandmarkItem.name" class="w-full bg-slate-900 disabled:opacity-50 text-white p-2 rounded-xl font-bold active:scale-95 transition">
                        æ–°å¢æ™¯é» <i class="fa-solid fa-plus ml-1"></i>
                    </button>
                </div>

                <div v-for="item in landmarks" :key="item.id" class="p-4 border rounded-2xl flex flex-col bg-white shadow-sm hover:shadow-md transition">
                    
                    <div v-if="!item.isEditing">
                        <div class="flex justify-between items-start mb-2">
                            <div>
                                <h3 class="font-bold text-slate-900">{{ item.name }}</h3>
                                <p class="text-xs text-orange-600">{{ item.type }}</p>
                            </div>
                            <a :href="'http://googleusercontent.com/maps.google.com/search?q=' + item.name + '+é¦™æ¸¯'" target="_blank" class="text-xs bg-slate-100 text-slate-600 px-2 py-1 rounded-full hover:bg-slate-200">å°èˆª <i class="fa-solid fa-location-arrow ml-1"></i></a>
                        </div>
                        <p class="text-sm text-slate-600 mb-3">{{ item.desc }}</p>
                        <div class="flex justify-end gap-3 pt-1 border-t border-slate-100 mt-2">
                            <button @click="toggleLandmarkEdit(item)" class="text-xs text-blue-500 hover:text-blue-700 font-medium"><i class="fa-solid fa-edit mr-1"></i>ç·¨è¼¯</button>
                            <button @click="deleteLandmarkItem(item.id)" class="text-xs text-red-500 hover:text-red-700 font-medium"><i class="fa-solid fa-trash-alt mr-1"></i>åˆªé™¤</button>
                        </div>
                    </div>

                    <div v-else>
                         <h4 class="font-bold text-sm mb-2 text-orange-600">ç·¨è¼¯æ™¯é»</h4>
                         <input v-model="item.name" placeholder="æ™¯é»åç¨±" class="w-full p-2 border rounded-lg text-sm mb-2 focus:ring-orange-500 focus:border-orange-500">
                         <input v-model="item.type" placeholder="æ™¯é»é¡å‹" class="w-full p-2 border rounded-lg text-sm mb-2 focus:ring-orange-500 focus:border-orange-500">
                         <textarea v-model="item.desc" placeholder="æ™¯é»ä»‹ç´¹/ç­†è¨˜..." rows="2" class="w-full p-2 border rounded-lg text-sm mb-3 focus:ring-orange-500 focus:border-orange-500"></textarea>
                         <button @click="toggleLandmarkEdit(item)" class="w-full bg-green-600 text-white p-2 rounded-xl font-bold active:scale-95 transition">
                             å„²å­˜ä¿®æ”¹ <i class="fa-solid fa-save ml-1"></i>
                         </button>
                    </div>
                </div>
            </section>

            <section v-if="currentTab === 'finance'">
                <div class="bg-slate-900 text-white p-4 rounded-2xl mb-4 flex justify-between">
                    <div><p class="text-xs opacity-70">ç¸½æ”¯å‡º (HKD)</p><p class="text-2xl font-bold">${{ totalExpense }}</p></div>
                    <i class="fa-solid fa-chart-pie text-orange-500 text-3xl opacity-50"></i>
                </div>
                <div class="space-y-2 mb-6">
                    <input v-model="newExpense.item" placeholder="å“é …" class="w-full p-3 border rounded-xl text-sm focus:ring-orange-500 focus:border-orange-500">
                    <div class="flex gap-2">
                        <input v-model.number="newExpense.amount" type="number" placeholder="é‡‘é¡" class="flex-1 p-3 border rounded-xl text-sm focus:ring-orange-500 focus:border-orange-500">
                        <select v-model="newExpense.method" class="flex-1 p-3 border rounded-xl text-sm bg-white focus:ring-orange-500 focus:border-orange-500">
                            <option value="ç¾é‡‘">ğŸ’µ ç¾é‡‘</option>
                            <option value="ä¿¡ç”¨å¡">ğŸ’³ ä¿¡ç”¨å¡</option>
                            <option value="å…«é”é€š">ğŸšŒ å…«é”é€š</option>
                            <option value="é›»å­æ”¯ä»˜">ğŸ“± é›»å­æ”¯ä»˜</option>
                        </select>
                    </div>
                    <button @click="addExpense" class="w-full bg-orange-500 text-white p-3 rounded-xl font-bold shadow-lg active:scale-95 transition">æ–°å¢æ”¯å‡º</button>
                </div>
                <div v-for="(exp, index) in expenses" :key="index" class="flex justify-between p-3 border-b text-sm">
                    <span>{{ exp.item }} <small class="text-slate-400">({{ exp.method }})</small></span>
                    <span class="font-medium text-red-500">-${{ exp.amount }}</span>
                </div>
            </section>

            <section v-if="currentTab === 'wishlist'" class="space-y-4">
                <div class="mb-4">
                    <select v-model="selectedMember" class="w-full p-3 border border-orange-300 rounded-xl text-sm font-bold bg-white shadow-md focus:ring-2 focus:ring-orange-500">
                        <option value="å…¨éƒ¨">æ‰€æœ‰äºº (é¡¯ç¤ºæ‰€æœ‰é¡˜æœ›)</option>
                        <option v-for="member in members" :key="member" :value="member">{{ member }}</option>
                    </select>
                </div>

                <div class="flex gap-2 mb-6">
                    <select v-model="newWishItem.member" class="p-3 border rounded-xl text-sm bg-white font-medium">
                        <option v-for="member in members" :key="member + '_add'" :value="member">{{ member }}</option>
                    </select>
                    <input v-model="newWishItem.item" @keyup.enter="addWishItem" placeholder="æƒ³è²·ä»€éº¼..." class="flex-1 p-3 border rounded-xl text-sm focus:ring-orange-500 focus:border-orange-500">
                    <button @click="addWishItem" class="bg-slate-900 text-white px-4 rounded-xl active:scale-95 transition"><i class="fa-solid fa-plus"></i></button>
                </div>

                <div v-if="filteredWishlist.length > 0" class="space-y-2">
                    <div v-for="(item, index) in filteredWishlist" :key="item.id" class="flex items-center p-3 bg-slate-50 rounded-xl justify-between">
                        <div class="flex items-center">
                            <input type="checkbox" v-model="item.done" class="mr-3 w-5 h-5 accent-orange-500">
                            <span :class="{'line-through text-slate-400': item.done}" class="text-sm font-medium">{{ item.item }}</span>
                        </div>
                        <span v-if="selectedMember === 'å…¨éƒ¨'" class="text-xs bg-orange-100 text-orange-600 px-2 py-1 rounded-full">{{ item.member }}</span>
                    </div>
                </div>
                <div v-else class="text-center text-slate-500 p-8 border border-dashed rounded-xl">
                    <i class="fa-solid fa-face-frown text-2xl mb-2"></i>
                    <p>{{ selectedMember }} çš„é¡˜æœ›æ¸…å–®æ˜¯ç©ºçš„ï¼</p>
                </div>
            </section>

        </main>
    </div>
<script>
    const { createApp, ref, computed, watch } = Vue;

    // --- Local Storage åŠ©æ‰‹å‡½å¼ï¼šè®€å–èˆ‡å„²å­˜é€šç”¨é‚è¼¯ ---

    // é€šç”¨è®€å–å‡½å¼
    function loadData(key, defaultData = []) {
        try {
            const stored = localStorage.getItem(key);
            // ç”±æ–¼è¡Œç¨‹å’Œæ™¯é»éœ€è¦ isEditing å±¬æ€§ï¼Œç¢ºä¿èˆŠè³‡æ–™æœ‰é€™å€‹å±¬æ€§
            const data = stored ? JSON.parse(stored) : defaultData;
            if (key === 'hk_trip_schedule' || key === 'hk_trip_landmarks') {
                return data.map(item => ({ ...item, isEditing: false }));
            }
            return data;
        } catch (e) {
            console.error(`ç„¡æ³•å¾ Local Storage è®€å–è³‡æ–™: ${key}`, e);
            return defaultData;
        }
    }

    // é€šç”¨å„²å­˜å‡½å¼
    function saveData(key, list) {
        localStorage.setItem(key, JSON.stringify(list));
    }

    createApp({
        setup() {
            const currentTab = ref('itinerary'); 
            
            // --- 1. è¡Œç¨‹ç®¡ç†é‚è¼¯ (CRUD & æŒä¹…åŒ–) ---
            
            const defaultSchedule = [
                 { id: 1, date: '12/25', tag: 'å…©äººå•Ÿç¨‹', desc: 'æŠµæ¸¯ã€check-in é¦™æ¸¯å®¶ã€æ—ºè§’æ™šé¤', isEditing: false },
                 { id: 2, date: '01/01', tag: 'å®¶æ—åŒ¯åˆ', desc: 'åˆ°æ©Ÿå ´æ¥çˆ¸åª½ & å¼Ÿå¼Ÿã€å°–æ²™å’€æµ·æ—', isEditing: false },
                 { id: 3, date: '01/04', tag: 'å®¶æ—å›ç¨‹', desc: 'é€æ©Ÿã€è‡ªç”±æ´»å‹•ã€æ™šä¸Šè€ƒæ…® Long Stay', isEditing: false }
            ];

            const initialSchedule = loadData('hk_trip_schedule', defaultSchedule);
            
            let nextScheduleId = initialSchedule.length > 0 
                                 ? Math.max(...initialSchedule.map(s => s.id)) + 1 
                                 : 4; 

            const schedule = ref(initialSchedule);

            watch(schedule, (newList) => {
                saveData('hk_trip_schedule', newList);
            }, { deep: true });

            const newScheduleItem = ref({ date: '', tag: '', desc: '' });

            function addScheduleItem() {
                if (newScheduleItem.value.date && newScheduleItem.value.desc) {
                    schedule.value.push({
                        id: nextScheduleId++,
                        date: newScheduleItem.value.date,
                        tag: newScheduleItem.value.tag || 'è¡Œç¨‹',
                        desc: newScheduleItem.value.desc,
                        isEditing: false
                    });
                    newScheduleItem.value = { date: '', tag: '', desc: '' };
                }
            }

            function toggleEdit(item) {
                item.isEditing = !item.isEditing;
            }

            function deleteScheduleItem(id) {
                schedule.value = schedule.value.filter(item => item.id !== id);
            }

            // --- 2. æ™¯é»ç®¡ç†é‚è¼¯ (CRUD & æŒä¹…åŒ–) ---
            
            const defaultLandmarks = [
                { id: 1, name: 'é¦™æ¸¯åœ‹éš›æ©Ÿå ´', type: 'äº¤é€šæ¨ç´', desc: 'æŠµæ¸¯åœ°é»', isEditing: false },
                { id: 2, name: 'é¦™æ¸¯è¿ªå£«å°¼æ¨‚åœ’', type: 'éŠæ¨‚æ™¯é»', desc: 'é è¨ˆ 1/2 å¸¶å®¶äººå»', isEditing: false },
                { id: 3, name: 'ä¸­ç’°å¤§é¤¨', type: 'æ–‡åŒ–è—è¡“', desc: 'ä¸­ç’°å€çš„æ­·å²å»ºç¯‰ç¾¤', isEditing: false }
            ];

            const initialLandmarks = loadData('hk_trip_landmarks', defaultLandmarks);
            
            let nextLandmarkId = initialLandmarks.length > 0
                                 ? Math.max(...initialLandmarks.map(l => l.id)) + 1
                                 : 4;

            const landmarks = ref(initialLandmarks);

            watch(landmarks, (newList) => {
                saveData('hk_trip_landmarks', newList);
            }, { deep: true });

            const newLandmarkItem = ref({ name: '', type: '', desc: '' });

            function addLandmarkItem() {
                if (newLandmarkItem.value.name) {
                    landmarks.value.push({
                        id: nextLandmarkId++,
                        name: newLandmarkItem.value.name,
                        type: newLandmarkItem.value.type || 'æ™¯é»',
                        desc: newLandmarkItem.value.desc || '',
                        isEditing: false
                    });
                    newLandmarkItem.value = { name: '', type: '', desc: '' };
                }
            }

            function toggleLandmarkEdit(item) {
                item.isEditing = !item.isEditing;
            }

            function deleteLandmarkItem(id) {
                landmarks.value = landmarks.value.filter(item => item.id !== id);
            }
            
            // --- 3. è¨˜å¸³é‚è¼¯ (æŒä¹…åŒ–) ---
            
            const initialExpenses = loadData('hk_trip_expenses');
            const expenses = ref(initialExpenses);

            watch(expenses, (newList) => {
                saveData('hk_trip_expenses', newList);
            }, { deep: true });

            const newExpense = ref({ item: '', amount: null, method: 'ç¾é‡‘' });
            const totalExpense = computed(() => expenses.value.reduce((sum, exp) => sum + exp.amount, 0));
            
            function addExpense() {
                if (newExpense.value.item && newExpense.value.amount) {
                    expenses.value.unshift({ ...newExpense.value });
                    newExpense.value = { item: '', amount: null, method: 'ç¾é‡‘' };
                }
            }

            // --- 4. é¡˜æœ›æ¸…å–®é‚è¼¯ (æŒä¹…åŒ–) ---

            const members = ['çˆ¸çˆ¸', 'åª½åª½', 'æ©å®œ', 'æŸå‘ˆ', 'å”æ²›'];
            const selectedMember = ref('å…¨éƒ¨'); 
            const newWishItem = ref({ member: 'æ©å®œ', item: '' }); 
            
            const initialWishlist = loadData('hk_trip_wishlist');
            let nextWishId = initialWishlist.length > 0 
                                ? Math.max(...initialWishlist.map(w => w.id)) + 1 
                                : 1;

            const wishlist = ref(initialWishlist);

            watch(wishlist, (newList) => {
                saveData('hk_trip_wishlist', newList);
            }, { deep: true });

            const filteredWishlist = computed(() => {
                if (selectedMember.value === 'å…¨éƒ¨') {
                    return [...wishlist.value].sort((a, b) => members.indexOf(a.member) - members.indexOf(b.member));
                }
                return wishlist.value.filter(item => item.member === selectedMember.value);
            });

            function addWishItem() {
                if (newWishItem.value.item && newWishItem.value.member) {
                    wishlist.value.push({ 
                        id: nextWishId++,
                        member: newWishItem.value.member,
                        item: newWishItem.value.item, 
                        done: false 
                    });
                    newWishItem.value.item = ''; 
                    selectedMember.value = newWishItem.value.member;
                }
            }


            return { 
                currentTab, 
                // è¡Œç¨‹
                schedule, newScheduleItem, addScheduleItem, toggleEdit, deleteScheduleItem,
                // æ™¯é»
                landmarks, newLandmarkItem, addLandmarkItem, toggleLandmarkEdit, deleteLandmarkItem,
                // è¨˜å¸³
                expenses, newExpense, totalExpense, addExpense, 
                // é¡˜æœ›æ¸…å–®
                members, selectedMember, wishlist, filteredWishlist, newWishItem, addWishItem
            };
        }
    }).mount('#app');
</script>
</body>
</html>